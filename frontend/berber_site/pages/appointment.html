<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Randevu | Berber Cumali</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/appointment.css">
</head>
<body>
  <div id="header"></div>
    <div class="appointment-container">
        <!-- Header -->
        <header class="appointment-header">
            <h1><i class="fas fa-calendar-check"></i> Randevu Sistemi</h1>
            <p>Profesyonel hizmet için randevunuzu oluşturun</p>
        </header>

        <!-- Main Content -->
        <main class="appointment-content">
            <!-- Appointment Form -->
            <section class="appointment-form-section">
                <div class="form-card">
                    <h2><i class="fas fa-plus-circle"></i> Yeni Randevu</h2>
                    <form id="randevuForm">
                        <div class="form-group">
                            <label for="tarih"><i class="far fa-calendar-alt"></i> Tarih</label>
                            <input type="date" id="tarih" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="berber"><i class="fas fa-user-tie"></i> Berber</label>
                            <select id="berber" class="form-control" required>
                                <option value="" disabled selected>Seçiniz</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="saat"><i class="far fa-clock"></i> Saat</label>
                            <select id="saat" class="form-control" required>
                                <option value="" disabled selected>Önce tarih seçin</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="hizmet"><i class="fas fa-cut"></i> Hizmet</label>
                            <select id="hizmet" class="form-control" required>
                                <option value="" disabled selected>Seçiniz</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="not"><i class="far fa-sticky-note"></i> Not</label>
                            <textarea id="not" class="form-control" rows="2" placeholder="İsteğe bağlı not..."></textarea>
                        </div>
                        
                        <div class="form-check">
                            <input type="checkbox" id="smsHatirlatma" class="form-check-input" checked>
                            <label for="smsHatirlatma" class="form-check-label">SMS hatırlatma almak istiyorum</label>
                        </div>
                        
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Randevu Oluştur
                        </button>
                    </form>
                </div>
            </section>

            <!-- Appointments List -->
            <section class="appointment-list-section">
                <div class="list-card">
                    <div class="list-header">
                        <h2><i class="fas fa-list-ul"></i> Randevularım</h2>
                        <div class="filters">
                            <div class="filter-group">
                                <label for="filterRandevu"><i class="fas fa-filter"></i> Filtre:</label>
                                <select id="filterRandevu" class="form-control">
                                    <option value="all">Tümü</option>
                                    <option value="gelecek">Gelecek</option>
                                    <option value="gecmis">Geçmiş</option>
                                    <option value="iptal">İptal</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="filterBerber"><i class="fas fa-user-tie"></i> Berber:</label>
                                <select id="filterBerber" class="form-control">
                                    <option value="all">Tümü</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div id="randevuListesi" class="appointment-list">
                        <!-- Dynamic content will be loaded here -->
                        <div class="empty-state">
                            <i class="far fa-calendar-check"></i>
                            <p>Henüz randevunuz bulunmamaktadır</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
<div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/Appointment.js"></script>
 <script>
    // Header yükleme ve başlatma sistemi
    async function initializeHeader() {
      try {
        // 1. Header HTML'ini yükle
        const headerHtml = await (await fetch('header.html')).text();
        document.getElementById('header').innerHTML = headerHtml;

        // 2. Header CSS'ini dinamik olarak ekle
        const headerCss = document.createElement('link');
        headerCss.rel = 'stylesheet';
        headerCss.href = '../assets/css/header.css';
        document.head.appendChild(headerCss);

        // 3. Header JS'ini yükle
        await new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = '../assets/js/Header.js';
          script.onload = resolve;
          script.onerror = reject;
          script.defer = true;
          document.head.appendChild(script);
        });

        // 4. Header'ın tam yüklenmesini bekle
        await waitForHeaderElements();

      } catch (error) {
        console.error('Header başlatma hatası:', error);
      }
    }

    // Gerekli elementler yüklenene kadar bekle
    function waitForHeaderElements() {
      return new Promise((resolve) => {
        const checkInterval = setInterval(() => {
          if (document.getElementById('user-area') &&
            document.querySelector('.navbar-nav')) {
            clearInterval(checkInterval);
            resolve();
          }
        }, 50);
      });
    }

    // Footer yükleme fonksiyonu
    async function initializeFooter() {
      try {
        const footerHtml = await (await fetch('footer.html')).text();
        document.getElementById('footer').innerHTML = footerHtml;

        const footerCss = document.createElement('link');
        footerCss.rel = 'stylesheet';
        footerCss.href = '../assets/css/footer.css';
        document.head.appendChild(footerCss);
      } catch (error) {
        console.error('Footer yükleme hatası:', error);
      }
    }

    // Sayfa başlatma
    async function initializePage() {
      // Önce header ve footer'ı yükle
      await Promise.all([
        initializeHeader(),
        initializeFooter()
      ]);

      // Sonra diğer bağımlı scriptleri çalıştır
      AOS.init({ duration: 1000, once: true });

      // Ekstra kontrol
      if (typeof initHeader === 'function') {
        initHeader();
      }
    }

    // Sayfa yüklendiğinde başlat
    document.addEventListener('DOMContentLoaded', initializePage);

    // Sayfa geçişlerinde (turbo links vs. için)
    document.addEventListener('turbo:load', initializePage);
    window.addEventListener('pageshow', initializePage);
  </script>
</body>

</html>